![](https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fba7h3rsxj0ibjrjl97f9.png)

**Google Compute Engine (GCE) ‚Äì Gi·∫£i th√≠ch v·ªÅ Live Migration v√† Availability Policy**

---

### T·ªïng quan

Khi v·∫≠n h√†nh c√°c workload tr√™n **Google Cloud Platform (GCP)**, m·ªôt trong nh·ªØng m·ªëi quan t√¢m h√†ng ƒë·∫ßu l√† **ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (High Availability)** cho c√°c **m√°y ·∫£o (Virtual Machines ‚Äì VM)** trong c√°c t√¨nh hu·ªëng b·∫£o tr√¨ ƒë·ªãnh k·ª≥ ho·∫∑c s·ª± c·ªë kh√¥ng d·ª± ki·∫øn ·ªü t·∫ßng h·∫° t·∫ßng v·∫≠t l√Ω.

ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y, **Google Compute Engine (GCE)** cung c·∫•p c∆° ch·∫ø **Live Migration** v√† **Availability Policies**, gi√∫p VM ti·∫øp t·ª•c ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh trong qu√° tr√¨nh Google th·ª±c hi·ªán b·∫£o tr√¨ h·ªá th·ªëng n·ªÅn t·∫£ng.

---

### 1. Ph√¢n t√°ch tr√°ch nhi·ªám qu·∫£n l√Ω ph·∫ßn m·ªÅm v√† ph·∫ßn c·ª©ng

**Ph√≠a ng∆∞·ªùi d√πng (Our Teams):**

* Qu·∫£n l√Ω c√°c c·∫≠p nh·∫≠t ·ªü c·∫•p VM, bao g·ªìm:

  * V√° l·ªói h·ªá ƒëi·ªÅu h√†nh (OS Patching)
  * Qu·∫£n l√Ω c·∫•u h√¨nh h·ªá ƒëi·ªÅu h√†nh v√† ph·∫ßn m·ªÅm
* Th·ª±c hi·ªán th√¥ng qua **VM Manager**, bao g·ªìm:

  * Patch Management
  * OS Configuration Policies

**Ph√≠a Google Cloud (GCP Teams):**
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F3gbv06tfu84cdhabdo6b.png)

* Ch·ªãu tr√°ch nhi·ªám to√†n b·ªô c√°c c·∫≠p nh·∫≠t v√† b·∫£o tr√¨ ·ªü c·∫•p **host v·∫≠t l√Ω**, bao g·ªìm:

  * Ph·∫ßn c·ª©ng
  * Hypervisor
  * H·∫° t·∫ßng m·∫°ng v√† ngu·ªìn ƒëi·ªán
  * V√° l·ªói v√† n√¢ng c·∫•p h·ªá th·ªëng n·ªÅn t·∫£ng

C√°ch ph√¢n t√°ch n√†y cho ph√©p ng∆∞·ªùi d√πng **ch·ªâ t·∫≠p trung v√†o VM**, trong khi Google Cloud ƒë·∫£m b·∫£o **h·∫° t·∫ßng b√™n d∆∞·ªõi lu√¥n ·ªïn ƒë·ªãnh v√† an to√†n**.

---

### 2. Live Migration l√† g√¨?

**Live Migration** l√† c∆° ch·∫ø cho ph√©p **VM ƒëang ch·∫°y ƒë∆∞·ª£c di chuy·ªÉn sang m·ªôt host kh√°c trong c√πng zone** khi host hi·ªán t·∫°i c·∫ßn b·∫£o tr√¨ ho·∫∑c n√¢ng c·∫•p, **m√† kh√¥ng g√¢y gi√°n ƒëo·∫°n d·ªãch v·ª•**.

#### L·ª£i √≠ch c·ªßa Live Migration

* VM **ti·∫øp t·ª•c ch·∫°y** trong su·ªët qu√° tr√¨nh b·∫£o tr√¨ c·ªßa GCP
* √Åp d·ª•ng cho c√°c t√¨nh hu·ªëng:

  * N√¢ng c·∫•p ph·∫ßn c·ª©ng v√† h·∫° t·∫ßng
  * B·∫£o tr√¨ h·ªá th·ªëng ƒëi·ªán ho·∫∑c m·∫°ng
  * V√° l·ªói v√† c·∫≠p nh·∫≠t ƒë·ªãnh k·ª≥ c·ªßa h·ªá th·ªëng
* ƒê·∫£m b·∫£o **kh√¥ng downtime** trong c√°c s·ª± ki·ªán b·∫£o tr√¨ do Google th·ª±c hi·ªán

üëâ T√≥m l·∫°i: **Live Migration = Kh√¥ng gi√°n ƒëo·∫°n d·ªãch v·ª• trong b·∫£o tr√¨ c·ªßa GCP**

---

### 3. ƒêi·ªÅu g√¨ x·∫£y ra trong qu√° tr√¨nh Live Migration?

Khi m·ªôt host v·∫≠t l√Ω ƒë∆∞·ª£c l√™n l·ªãch b·∫£o tr√¨:

* C√°c VM ƒëang ch·∫°y s·∫Ω **t·ª± ƒë·ªông ƒë∆∞·ª£c di chuy·ªÉn** sang m·ªôt host kh√°c trong **c√πng zone**
* To√†n b·ªô **c·∫•u h√¨nh, metadata v√† tr·∫°ng th√°i VM** ƒë∆∞·ª£c gi·ªØ nguy√™n
* **Kh√¥ng c·∫ßn can thi·ªáp th·ªß c√¥ng** t·ª´ ph√≠a ng∆∞·ªùi d√πng

**H·ªó tr·ª£ Live Migration:**

* VM s·ª≠ d·ª•ng **Local SSD**

**Kh√¥ng h·ªó tr·ª£ Live Migration:**

* VM g·∫Øn **GPU**
* **Spot VMs**
* **Preemptible VMs**

![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fpm5x1by5s5bbgj18p4u2.png)
---

### 4. Availability Policy trong GCP

Khi t·∫°o VM, ng∆∞·ªùi d√πng c·∫•u h√¨nh **Availability Policies** ƒë·ªÉ x√°c ƒë·ªãnh h√†nh vi c·ªßa VM trong c√°c k·ªãch b·∫£n kh√°c nhau.

#### 4.1. On Host Maintenance

X√°c ƒë·ªãnh h√†nh vi c·ªßa VM khi host v·∫≠t l√Ω ƒë∆∞·ª£c b·∫£o tr√¨:

* **Migrate VM Instance (Khuy·∫øn ngh·ªã)**
  VM ƒë∆∞·ª£c live migrate sang host kh√°c, ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao
* **Terminate VM Instance**
  VM s·∫Ω b·ªã d·ª´ng khi host b∆∞·ªõc v√†o qu√° tr√¨nh b·∫£o tr√¨

#### 4.2. Automatic Restart

X√°c ƒë·ªãnh h√†nh vi khi VM b·ªã d·ª´ng do c√°c nguy√™n nh√¢n **kh√¥ng ph·∫£i do ng∆∞·ªùi d√πng ch·ªß ƒë·ªông**, v√≠ d·ª•: s·ª± c·ªë h·ªá th·ªëng ho·∫∑c l·ªói ph·∫ßn c·ª©ng.

* **Automatic Restart: ON (Khuy·∫øn ngh·ªã)**
  VM t·ª± ƒë·ªông kh·ªüi ƒë·ªông l·∫°i
* **Automatic Restart: OFF**
  VM gi·ªØ tr·∫°ng th√°i d·ª´ng cho ƒë·∫øn khi ng∆∞·ªùi d√πng kh·ªüi ƒë·ªông th·ªß c√¥ng

![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j6ppnpx0vnd4jks6wu9.png)
---

### 5. Th·ª±c h√†nh t·ªët (Best Practices)

* Lu√¥n b·∫≠t **Live Migration (Migrate VM Instance)**, tr·ª´ khi workload kh√¥ng h·ªó tr·ª£
* B·∫≠t **Automatic Restart** cho c√°c workload s·∫£n xu·∫•t
* S·ª≠ d·ª•ng **VM Manager** ƒë·ªÉ qu·∫£n l√Ω c·∫≠p nh·∫≠t h·ªá ƒëi·ªÅu h√†nh kh√°ch (guest OS)
* Tin c·∫≠y GCP trong vi·ªác x·ª≠ l√Ω b·∫£o tr√¨ v√† n√¢ng c·∫•p h·∫° t·∫ßng host

---

### K·∫øt lu·∫≠n

**Live Migration v√† Availability Policies c·ªßa GCE** ƒë·∫£m b·∫£o VM ho·∫°t ƒë·ªông li√™n t·ª•c trong c√°c s·ª± ki·ªán n√¢ng c·∫•p ho·∫∑c b·∫£o tr√¨ h·∫° t·∫ßng ph√≠a Google Cloud.

Vi·ªác c·∫•u h√¨nh ƒë√∫ng Availability Policies gi√∫p:

* T·ªëi ƒëa h√≥a th·ªùi gian ho·∫°t ƒë·ªông (uptime)
* TƒÉng kh·∫£ nƒÉng ch·ªãu l·ªói c·ªßa h·ªá th·ªëng
* Gi·∫£m thi·ªÉu can thi·ªáp th·ªß c√¥ng trong v·∫≠n h√†nh

**T√≥m l∆∞·ª£c:**
Ng∆∞·ªùi d√πng qu·∫£n l√Ω **VM**, Google Cloud qu·∫£n l√Ω **host**, v√† **Live Migration** l√† c·∫ßu n·ªëi ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng gi·ªØa hai l·ªõp n√†y.
