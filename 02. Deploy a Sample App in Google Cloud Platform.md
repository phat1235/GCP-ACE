![](https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fa6jik1rwrwfhe47rj0op.webp)
# Phần 2: Triển khai ứng dụng mẫu trên Google Cloud Platform (GCP)

## 1. Giới thiệu

Google Cloud Platform (GCP) cung cấp khả năng triển khai **máy ảo (Virtual Machine – VM)** một cách nhanh chóng và thuận tiện thông qua dịch vụ **Compute Engine**. Phần này hướng dẫn từng bước tạo một VM cơ bản, phù hợp với người mới bắt đầu học và chuẩn bị cho chứng chỉ **Google Cloud Associate Cloud Engineer**.

---

## 2. Kích hoạt Compute Engine API

Trước khi tạo máy ảo, cần đảm bảo **Compute Engine API** đã được kích hoạt cho project đang sử dụng.

Thao tác thực hiện:

* Truy cập **Google Cloud Console**
* Chọn **APIs & Services** → **Enable APIs & Services**
* Tìm kiếm **Compute Engine API**
* Chọn **Enable** để kích hoạt

---

## 3. Tạo máy ảo (VM Instance) mới

Điều hướng theo đường dẫn:

* **Google Cloud Console** → **Compute Engine** → **VM Instances** → **Create Instance**

---

## 4. Cấu hình thông tin máy ảo

### 4.1. Thông tin cơ bản (Basic Information)
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fdsbmi41pery9csjme50n.png)
* **Name:** my-demo-1
* **Labels:**

  * environment: dev
* **Region:** us-central1
* **Zone:** us-central1-a

### 4.2. Cấu hình máy (Machine Configuration)
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fm9m0siaf690p63atfi4n.png)
* **Machine Series:** E2
* **Machine Type:** e2-micro (thuộc Free Tier, phù hợp học tập và thử nghiệm)

### 4.3. Hệ điều hành và lưu trữ (Operating System and Storage)
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fy6t34l0q2w0pkmt9mvwh.png)
* **Boot Disk:** Sử dụng cấu hình mặc định

  * Hệ điều hành: Debian hoặc Ubuntu (được Google khuyến nghị cho môi trường học tập)

### 4.4. Chính sách khả dụng (Availability Policies)
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fl5aqm5itnvtf29svjxq1.png)
* **VM Provisioning Model:** Standard
* **Display Device:** Bật (Checked)
* **Confidential VM Service:** Tắt (mặc định)
* **Container:** Tắt (mặc định)

### 4.5. Quan sát và giám sát (Observability)

* Giữ nguyên cấu hình mặc định

### 4.6. Danh tính và quyền truy cập API (Identity and API Access)
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fq8hd929h37pm9rxapdd8.png)
* **Service Account:** Compute Engine default service account
* **Access Scopes:** Allow default access

### 4.7. Bảo mật – Tường lửa (Firewall)
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Frxo2dz90ebfbc0vylj50.png)
* Bật **Allow HTTP traffic**

(Tùy chọn này cho phép truy cập HTTP từ Internet, cần thiết cho việc triển khai web server đơn giản.)

### 4.8. Mạng và các tùy chọn nâng cao (Networking & Advanced Options)

* Giữ nguyên cấu hình mặc định

(Các tùy chọn nâng cao sẽ được phân tích chi tiết ở các phần sau.)

---

## 5. Khởi tạo máy ảo
![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F4ppzp7horxwgza6g902s.png)

* Nhấn **Create** để bắt đầu quá trình tạo VM
* Google Cloud sẽ tự động cấp phát tài nguyên và triển khai máy ảo
* Sau vài phút, VM sẽ ở trạng thái **Running** và sẵn sàng sử dụng

---

## 6. Kết nối tới máy ảo qua SSH

Thao tác thực hiện:

* Truy cập **Google Cloud Console** → **Compute Engine** → **VM Instances**
* Chọn máy ảo **demo1-vm**
* Nhấn **SSH** → **Open in browser window**

### 6.1. Cơ chế hoạt động của SSH trên trình duyệt

Khi mở phiên SSH thông qua trình duyệt, Google Cloud tự động:

* Sinh cặp khóa SSH tạm thời
* Sao chép khóa công khai (public key) vào máy ảo
* Ghi khóa vào file:

  * `~/.ssh/authorized_keys`
* Khởi tạo phiên SSH trực tiếp trong trình duyệt

Có thể kiểm tra khóa SSH bằng lệnh:

```
cat ~/.ssh/authorized_keys
```

---

## 7. Tạo script cài đặt Web Server

Tiến hành tạo một script đơn giản để cài đặt **Nginx** và triển khai trang web thử nghiệm.

### 7.1. Tạo file script

```
nano webserver-install.sh
```

### 7.2. Nội dung script

```
#!/bin/bash
sudo apt install -y telnet
sudo apt install -y nginx
sudo systemctl enable nginx
sudo chmod -R 755 /var/www/html
HOSTNAME=$(hostname)
sudo echo "<!DOCTYPE html> <html> <body style='background-color:rgb(250, 210, 210);'> <h1>Welcome to Latchu@DevOps - WebVM App1 </h1> <p><strong>VM Hostname:</strong> $HOSTNAME</p> <p><strong>VM IP Address:</strong> $(hostname -I)</p> <p><strong>Application Version:</strong> V1</p> <p>Google Cloud Platform - Demos</p> </body></html>" | sudo tee /var/www/html/index.html
```

Lưu file và thoát (CTRL+O, CTRL+X), sau đó cấp quyền thực thi và chạy script:

```
chmod +x webserver-install.sh
./webserver-install.sh
```

![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F3m6vcvleuheyocame2gb.png)
---

## 8. Truy cập ứng dụng Web

![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ffggzlxejwk5x9d0vz6rd.png)
* Truy cập trang chi tiết VM để lấy **External IP**
* Mở trình duyệt và truy cập địa chỉ:

```
http://<external-ip-cua-vm>
```

Nếu cấu hình đúng, trang web thử nghiệm sẽ hiển thị thông tin máy ảo, địa chỉ IP và phiên bản ứng dụng.

---

## 9. Kết luận

Qua phần thực hành này, người học đã nắm được quy trình cơ bản để:

* Kích hoạt dịch vụ Compute Engine
* Tạo và cấu hình máy ảo trên Google Cloud
* Kết nối SSH an toàn
* Triển khai một ứng dụng web đơn giản

Đây là kỹ năng nền tảng và bắt buộc đối với **Google Cloud Associate Cloud Engineer**, đồng thời là cơ sở cho các kiến trúc hệ thống phức tạp hơn trong môi trường đám mây.
