![](https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F06nx7h8f6rf027a6ek84.png)
## **Phần 3: Hiểu về các tác vụ quản lý máy ảo (VM) – Stop, Start, Suspend, Resume, Delete và Reset trong Google Cloud Platform (GCP)**


Việc quản lý hiệu quả các máy ảo (Virtual Machine – VM) trong Google Cloud không chỉ giúp tối ưu hóa việc sử dụng tài nguyên mà còn góp phần đáng kể vào việc tiết kiệm chi phí. Phần này trình bày chi tiết bản chất, tác động và trường hợp sử dụng của các thao tác: **Stop, Start, Suspend, Resume, Reset và Delete** đối với VM trong Google Cloud, phù hợp với chuẩn kiến thức của chứng chỉ **Google Cloud Associate Cloud Engineer**.

![](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftrkhfsmge0e8wz1qjo7j.png)
---

## 1. Stop (Dừng) VM

### 1.1. Những gì bị mất khi dừng VM

Khi một VM bị dừng (trạng thái **TERMINATED**):

* Địa chỉ IP ngoài (External/Public IP dạng **ephemeral**) sẽ bị thu hồi.
* Khi khởi động lại, VM sẽ được cấp một địa chỉ IP công cộng mới, **trừ khi** bạn đã gán trước một **Static External IP**. => TIỀN VẪN TÍNH :)))

### 1.2. Những gì VM vẫn được giữ lại

Ngay cả khi VM ở trạng thái dừng, các thành phần sau vẫn được bảo toàn:

* Các **Persistent Disk** gắn với VM (dữ liệu được đảm bảo an toàn). => TIỀN VẪN TÍNH :)))
* Địa chỉ IP nội bộ (Internal IP).
* Địa chỉ MAC của card mạng ảo.

### 1.3. Trường hợp nên dừng VM

Việc dừng VM là phù hợp khi:

* VM không được sử dụng trong một khoảng thời gian (idle), nhằm tiết kiệm chi phí.
* Cần thay đổi cấu hình máy (machine type), ví dụ: số lượng CPU, dung lượng bộ nhớ.
* Cần gắn thêm hoặc tháo bớt các ổ đĩa.

### 1.4. Vấn đề tính phí

* VM ở trạng thái **TERMINATED** sẽ **không bị tính phí tài nguyên tính toán (vCPU, RAM)**.
* Tuy nhiên, bạn vẫn phải trả phí cho:

  * Persistent Disk.
  * Static External IP (nếu đã đặt trước nhưng không sử dụng).

---

## 2. Suspend và Resume VM

### 2.1. Suspend (Tạm ngưng) VM – Cơ chế hoạt động

Khi thực hiện thao tác **Suspend**:

* Trạng thái bộ nhớ hệ điều hành, trạng thái thiết bị và trạng thái ứng dụng được lưu giữ.
* Nội dung bộ nhớ RAM của VM được ghi xuống bộ nhớ lưu trữ (storage). =>  CĂNG THẲNG ĐẤY
* Khi **Resume**, dữ liệu bộ nhớ được nạp lại vào RAM, VM tiếp tục hoạt động đúng tại thời điểm trước khi tạm ngưng. => QUÁ ĐẲNG CẤP

### 2.2. Các đặc điểm quan trọng

* VM có thể ở trạng thái Suspend tối đa **60 ngày**, sau đó sẽ tự động bị dừng (Stop).
* VM có dung lượng bộ nhớ **lớn hơn 120 GB** không hỗ trợ Suspend.
* Phần lớn hệ điều hành phổ biến hỗ trợ Suspend/Resume, tuy nhiên vẫn tồn tại một số ngoại lệ. => HÃY NHỚ LÝ THUYẾT LÀ VẬY NHƯNG NÓ BỊP MỘT SỐ THỜI ĐIỂM.

### 2.3. Trường hợp sử dụng điển hình

* Môi trường **phát triển và kiểm thử (Dev/Test)** không cần chạy ngoài giờ hành chính nhưng vẫn cần giữ nguyên trạng thái ứng dụng.
* Ứng dụng có thời gian khởi tạo dài, không thuận tiện nếu phải khởi động lại từ đầu.

### 2.4. Chi phí liên quan

Trong thời gian VM ở trạng thái Suspend, bạn vẫn phải thanh toán cho:

* Dung lượng lưu trữ dùng để lưu trạng thái bộ nhớ của VM.
* Các Persistent Disk gắn với VM.
* Static External IP (nếu có).

### 2.5. Thực hiện Suspend và Resume

* Vào **VM Instances → demo1-vm → Actions → Suspend**.
* Xác nhận thao tác Suspend thành công.
* Để tiếp tục hoạt động, chọn **Actions → Start / Resume**.

**Lưu ý:** Địa chỉ IP ngoài trước và sau khi Suspend/Resume có thể thay đổi vì đây là **Ephemeral IP**, không phải Static IP. => GẮN CHO NÓ IP TĨNH LUÔN => TIỀN

---

## 3. Reset và Delete VM

### 3.1. Reset VM Instance

* Hoạt động tương tự như việc **khởi động cứng (hard reset)** trên máy tính vật lý.
* Toàn bộ dữ liệu trong bộ nhớ RAM bị xóa.
* Không có quá trình tắt máy an toàn; hệ điều hành khách (guest OS) không được thông báo trước.
* VM vẫn duy trì trạng thái **RUNNING** sau khi Reset.

**Thực hiện Reset:**

* Vào **VM Instances → demo1-vm → Actions → Reset**.
* Chỉ bộ nhớ bị xóa; dữ liệu trên Persistent Disk không bị ảnh hưởng.

### 3.2. Kiểm tra ứng dụng

* Truy cập:
  `http://<external-ip-of-vm>`
* Quan sát:

  * Ứng dụng vẫn có thể truy cập và hoạt động bình thường.

### 3.3. Delete VM Instance

* Xóa hoàn toàn VM ra khỏi dự án Google Cloud.
* Tài nguyên liên quan sẽ bị loại bỏ theo cấu hình đã chọn (VM, disk, IP…). => NẾU DISK TẠO NGOÀI VÀ ATTACH VÀO NÓ THÌ SAO NHỈ?
* Sử dụng khi **không còn nhu cầu** sử dụng VM trong tương lai.

---

**Kết luận:**
Việc hiểu rõ bản chất và tác động của từng thao tác quản lý VM là yêu cầu cốt lõi đối với Associate Cloud Engineer, giúp thiết kế hệ thống hiệu quả, tối ưu chi phí và đảm bảo tính ổn định trong vận hành hạ tầng Google Cloud.
